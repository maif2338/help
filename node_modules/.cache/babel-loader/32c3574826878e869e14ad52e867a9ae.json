{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/fannymai/Documents/project-2-kelsonflint/src/components/Authentication.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport firebase from 'firebase/app';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport AnimalCard from './animal_card';\nimport Login from \"./LogIn\"; // uiConfig for Authentication\n\nconst uiConfig = {\n  signInOptions: [{\n    provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,\n    requireDisplayName: true\n  }, firebase.auth.GoogleAuthProvider.PROVIDER_ID],\n  credentialHelper: 'none',\n  signInFlow: 'popup',\n  callbacks: {\n    signInSuccessWithAuthResult: () => false\n  }\n};\nexport let userID = \"\";\nexport default function Authentication(props) {\n  _s();\n\n  const [errorMessage, setErrorMessage] = useState(undefined);\n  const [user, setUser] = useState(undefined);\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    const authUnregisterFunction = firebase.auth().onAuthStateChanged(firebaseUser => {\n      if (firebaseUser) {\n        console.log(\"logged in as \" + firebaseUser.email);\n        userID = firebaseUser.uid;\n        setUser(firebaseUser);\n        setIsLoading(false);\n      } else {\n        console.log(\"logged out\");\n        setUser(null);\n        setIsLoading(false);\n      }\n    });\n    return function cleanup() {\n      authUnregisterFunction();\n    };\n  }, []); // A callback function for logging out the current user\n\n  const handleSignOut = () => {\n    setErrorMessage(null); //clear any old errors\n\n    firebase.auth().signOut();\n  };\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        id: \"spinner\",\n        className: \"fa fa-spinner fa-spin fa-3x\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this);\n  } // Content to render\n\n\n  let content = null; // If logged out, show signup form\n\n  if (!user) {\n    content = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \" Log in or Sign up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \" Log into an existing account or sign up below. Having an account allows you to access the watch list feature. The feature allows you pick certain species to add to your personal watch list. You can use any email or a Google account.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  } // If logged in, show welcome message\n  else {\n      content = /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(WelcomeHeader, {\n          user: user,\n          children: user && /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"logoutButton\",\n            className: \"btn btn-warning\",\n            onClick: handleSignOut,\n            children: [\"Log Out \", user.displayName]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 7\n      }, this);\n    }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"alert alert-danger\",\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this), content]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n} // Displays a welcome message\n\n_s(Authentication, \"kLhrxFzqwAKvEIldzFnrkTkAmDc=\");\n\n_c = Authentication;\n\nfunction WelcomeHeader(props) {\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Welcome \", props.user.displayName, \"!\", ' ']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      id: \"logoutMessage\",\n      children: \" If you would like to log out of your account, come back to this page and click the log out button below\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), props.children, \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = WelcomeHeader;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Authentication\");\n$RefreshReg$(_c2, \"WelcomeHeader\");","map":{"version":3,"sources":["/Users/fannymai/Documents/project-2-kelsonflint/src/components/Authentication.js"],"names":["React","useState","useEffect","firebase","StyledFirebaseAuth","AnimalCard","Login","uiConfig","signInOptions","provider","auth","EmailAuthProvider","PROVIDER_ID","requireDisplayName","GoogleAuthProvider","credentialHelper","signInFlow","callbacks","signInSuccessWithAuthResult","userID","Authentication","props","errorMessage","setErrorMessage","undefined","user","setUser","isLoading","setIsLoading","authUnregisterFunction","onAuthStateChanged","firebaseUser","console","log","email","uid","cleanup","handleSignOut","signOut","content","displayName","WelcomeHeader","children"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAOC,kBAAP,MAA+B,qCAA/B;AACA,OAAO,eAAP;AACA,OAAO,mBAAP;AACA,OAAOC,UAAP,MAAuB,eAAvB;AACA,OAAOC,KAAP,MAAkB,SAAlB,C,CAEA;;AACA,MAAMC,QAAQ,GAAG;AACbC,EAAAA,aAAa,EAAE,CACX;AACIC,IAAAA,QAAQ,EAAEN,QAAQ,CAACO,IAAT,CAAcC,iBAAd,CAAgCC,WAD9C;AAEIC,IAAAA,kBAAkB,EAAE;AAFxB,GADW,EAKXV,QAAQ,CAACO,IAAT,CAAcI,kBAAd,CAAiCF,WALtB,CADF;AASbG,EAAAA,gBAAgB,EAAE,MATL;AAUbC,EAAAA,UAAU,EAAE,OAVC;AAWbC,EAAAA,SAAS,EAAE;AACPC,IAAAA,2BAA2B,EAAE,MAAM;AAD5B;AAXE,CAAjB;AAiBA,OAAO,IAAIC,MAAM,GAAG,EAAb;AACP,eAAe,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAAA;;AAC1C,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCtB,QAAQ,CAACuB,SAAD,CAAhD;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBzB,QAAQ,CAACuB,SAAD,CAAhC;AACA,QAAM,CAACG,SAAD,EAAYC,YAAZ,IAA4B3B,QAAQ,CAAC,IAAD,CAA1C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAM2B,sBAAsB,GAAG1B,QAAQ,CAACO,IAAT,GAAgBoB,kBAAhB,CAAoCC,YAAD,IAAkB;AAChF,UAAIA,YAAJ,EAAkB;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAkBF,YAAY,CAACG,KAA3C;AACAf,QAAAA,MAAM,GAAGY,YAAY,CAACI,GAAtB;AACAT,QAAAA,OAAO,CAACK,YAAD,CAAP;AACAH,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,OALD,MAKO;AACHI,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAP,QAAAA,OAAO,CAAC,IAAD,CAAP;AACAE,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACH;AACJ,KAX8B,CAA/B;AAaA,WAAO,SAASQ,OAAT,GAAmB;AACxBP,MAAAA,sBAAsB;AACvB,KAFD;AAGH,GAjBQ,EAiBN,EAjBM,CAAT,CAL0C,CAwB5C;;AACA,QAAMQ,aAAa,GAAG,MAAM;AAC1Bd,IAAAA,eAAe,CAAC,IAAD,CAAf,CAD0B,CACH;;AACvBpB,IAAAA,QAAQ,CAACO,IAAT,GAAgB4B,OAAhB;AACD,GAHD;;AAKA,MAAIX,SAAJ,EAAe;AACb,wBACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA,6BACE;AAAG,QAAA,EAAE,EAAC,SAAN;AAAgB,QAAA,SAAS,EAAC;AAA1B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AAKD,GApC2C,CAsC5C;;;AACA,MAAIY,OAAO,GAAG,IAAd,CAvC4C,CAyC5C;;AACA,MAAG,CAACd,IAAJ,EAAU;AACRc,IAAAA,OAAO,gBACL;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,eAKI,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA,cALJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AASD,GAVD,CAYA;AAZA,OAaK;AACHA,MAAAA,OAAO,gBACL;AAAA,+BACE,QAAC,aAAD;AAAe,UAAA,IAAI,EAAEd,IAArB;AAAA,oBAEGA,IAAI,iBACH;AAAQ,YAAA,EAAE,EAAC,cAAX;AAA0B,YAAA,SAAS,EAAC,iBAApC;AAAsD,YAAA,OAAO,EAAEY,aAA/D;AAAA,mCACWZ,IAAI,CAACe,WADhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAHJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF;AAYD;;AAED,sBACE;AAAA,eACGlB,YAAY,iBACX;AAAG,MAAA,SAAS,EAAC,oBAAb;AAAA,gBAAmCA;AAAnC;AAAA;AAAA;AAAA;AAAA,YAFJ,EAIGiB,OAJH;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAQD,C,CAED;;GAhFwBnB,c;;KAAAA,c;;AAiFxB,SAASqB,aAAT,CAAuBpB,KAAvB,EAA8B;AAC5B,sBACE;AAAQ,IAAA,SAAS,EAAC,WAAlB;AAAA,4BACE;AAAA,6BACWA,KAAK,CAACI,IAAN,CAAWe,WADtB,OAEG,GAFH;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAKE;AAAG,MAAA,EAAE,EAAC,eAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALF,EAOGnB,KAAK,CAACqB,QAPT;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAWD;;MAZQD,a","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport firebase from 'firebase/app';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport AnimalCard from './animal_card';\nimport Login from \"./LogIn\";\n\n// uiConfig for Authentication\nconst uiConfig = {\n    signInOptions: [\n        {\n            provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,\n            requireDisplayName: true\n        },\n        firebase.auth.GoogleAuthProvider.PROVIDER_ID\n    ],\n\n    credentialHelper: 'none',\n    signInFlow: 'popup',\n    callbacks: {\n        signInSuccessWithAuthResult: () => false,\n        \n    },\n};\n\nexport let userID = \"\";\nexport default function Authentication(props) {\n    const [errorMessage, setErrorMessage] = useState(undefined);\n    const [user, setUser] = useState(undefined);\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        const authUnregisterFunction = firebase.auth().onAuthStateChanged((firebaseUser) => {\n            if (firebaseUser) {\n                console.log(\"logged in as \" + firebaseUser.email);\n                userID = firebaseUser.uid;\n                setUser(firebaseUser);\n                setIsLoading(false);\n            } else {\n                console.log(\"logged out\");\n                setUser(null)\n                setIsLoading(false);\n            }\n        })\n\n        return function cleanup() {\n          authUnregisterFunction();\n        }\n    }, [])\n\n  // A callback function for logging out the current user\n  const handleSignOut = () => {\n    setErrorMessage(null); //clear any old errors\n    firebase.auth().signOut()\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"text-center\">\n        <i id=\"spinner\" className=\"fa fa-spinner fa-spin fa-3x\"></i>\n      </div>\n    )\n  }\n\n  // Content to render\n  let content = null; \n\n  // If logged out, show signup form\n  if(!user) { \n    content = (\n      <div className=\"container\">\n        <h1> Log in or Sign up</h1>\n        <p> Log into an existing account or sign up below. Having an account allows you to access the watch \n          list feature. The feature allows you pick certain species to add to your personal watch list. \n          You can use any email or a Google account.</p>\n          <Login />\n      </div>\n    );\n  } \n  \n  // If logged in, show welcome message\n  else { \n    content = (\n      <div>\n        <WelcomeHeader user={user}>\n          {/* log out button is child element */}\n          {user &&\n            <button id=\"logoutButton\" className=\"btn btn-warning\" onClick={handleSignOut}>\n              Log Out {user.displayName}\n            </button>\n          }\n        </WelcomeHeader>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {errorMessage &&\n        <p className=\"alert alert-danger\">{errorMessage}</p>\n      }\n      {content}\n    </div>\n  );\n}\n\n// Displays a welcome message\nfunction WelcomeHeader(props) {\n  return (\n    <header className=\"container\">\n      <h1>\n        Welcome {props.user.displayName}!\n        {' '}\n      </h1>\n      <p id=\"logoutMessage\"> If you would like to log out of your account, come back to this\n      page and click the log out button below</p>\n      {props.children} {/* for button */}\n    </header>\n  );\n}\n\n\n"]},"metadata":{},"sourceType":"module"}